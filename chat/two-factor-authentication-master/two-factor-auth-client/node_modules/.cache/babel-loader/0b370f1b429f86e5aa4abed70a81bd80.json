{"ast":null,"code":"var _jsxFileName = \"/home/abel/Desktop/practice/chat/two-factor-authentication-master/two-factor-auth-client/src/signin/Signin.js\";\nimport React, { useEffect, useState } from \"react\";\nimport { Form, Input, Button, notification } from \"antd\";\nimport { Redirect } from \"react-router-dom\";\nimport { UserOutlined, LockOutlined, DingtalkOutlined } from \"@ant-design/icons\";\nimport { login } from \"../util/ApiUtil\";\nimport \"./Signin.css\";\n\nconst Signin = props => {\n  const [loading, setLoading] = useState(false);\n  const [redirect, setRedirect] = useState();\n  const [username, setUsername] = useState();\n  useEffect(() => {\n    if (localStorage.getItem(\"accessToken\") !== null) {\n      props.history.push(\"/\");\n    }\n  }, []);\n\n  const onFinish = values => {\n    setLoading(true);\n    login(values).then(response => {\n      if (response.mfa) {\n        setUsername(values.username);\n        setRedirect(\"/verify\");\n      } else {\n        localStorage.setItem(\"accessToken\", response.accessToken);\n        props.history.push(\"/\");\n      }\n\n      setLoading(false);\n    }).catch(error => {\n      if (error.status === 401) {\n        notification.error({\n          message: \"Error\",\n          description: \"Username or Password is incorrect. Please try again!\"\n        });\n      } else {\n        notification.error({\n          message: \"Error\",\n          description: error.message || \"Sorry! Something went wrong. Please try again!\"\n        });\n      }\n\n      setLoading(false);\n    });\n  };\n\n  if (redirect) {\n    return /*#__PURE__*/React.createElement(Redirect, {\n      to: {\n        pathname: redirect,\n        state: {\n          username: username\n        }\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 55,\n        columnNumber: 7\n      }\n    });\n  }\n\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: \"login-container\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 60,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(DingtalkOutlined, {\n    style: {\n      fontSize: 50\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 61,\n      columnNumber: 7\n    }\n  }), /*#__PURE__*/React.createElement(Form, {\n    name: \"normal_login\",\n    className: \"login-form\",\n    initialValues: {\n      remember: true\n    },\n    onFinish: onFinish,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 62,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(Form.Item, {\n    name: \"username\",\n    rules: [{\n      required: true,\n      message: \"Please input your Username!\"\n    }],\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 68,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(Input, {\n    size: \"large\",\n    prefix: /*#__PURE__*/React.createElement(UserOutlined, {\n      className: \"site-form-item-icon\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 74,\n        columnNumber: 21\n      }\n    }),\n    placeholder: \"Username\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 72,\n      columnNumber: 11\n    }\n  })), /*#__PURE__*/React.createElement(Form.Item, {\n    name: \"password\",\n    rules: [{\n      required: true,\n      message: \"Please input your Password!\"\n    }],\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 78,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(Input, {\n    size: \"large\",\n    prefix: /*#__PURE__*/React.createElement(LockOutlined, {\n      className: \"site-form-item-icon\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 84,\n        columnNumber: 21\n      }\n    }),\n    type: \"password\",\n    placeholder: \"Password\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 82,\n      columnNumber: 11\n    }\n  })), /*#__PURE__*/React.createElement(Form.Item, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 89,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(Button, {\n    shape: \"round\",\n    size: \"large\",\n    htmlType: \"submit\",\n    className: \"login-form-button\",\n    loading: loading,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 90,\n      columnNumber: 11\n    }\n  }, \"Log in\")), \"Not a member yet? \", /*#__PURE__*/React.createElement(\"a\", {\n    href: \"/signup\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 100,\n      columnNumber: 27\n    }\n  }, \"Sign up\")));\n};\n\nexport default Signin;","map":{"version":3,"sources":["/home/abel/Desktop/practice/chat/two-factor-authentication-master/two-factor-auth-client/src/signin/Signin.js"],"names":["React","useEffect","useState","Form","Input","Button","notification","Redirect","UserOutlined","LockOutlined","DingtalkOutlined","login","Signin","props","loading","setLoading","redirect","setRedirect","username","setUsername","localStorage","getItem","history","push","onFinish","values","then","response","mfa","setItem","accessToken","catch","error","status","message","description","pathname","state","fontSize","remember","required"],"mappings":"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","sourcesContent":["import React, { useEffect, useState } from \"react\";\nimport { Form, Input, Button, notification } from \"antd\";\nimport { Redirect } from \"react-router-dom\";\nimport {\n  UserOutlined,\n  LockOutlined,\n  DingtalkOutlined,\n} from \"@ant-design/icons\";\nimport { login } from \"../util/ApiUtil\";\nimport \"./Signin.css\";\n\nconst Signin = (props) => {\n  const [loading, setLoading] = useState(false);\n  const [redirect, setRedirect] = useState();\n  const [username, setUsername] = useState();\n\n  useEffect(() => {\n    if (localStorage.getItem(\"accessToken\") !== null) {\n      props.history.push(\"/\");\n    }\n  }, []);\n\n  const onFinish = (values) => {\n    setLoading(true);\n    login(values)\n      .then((response) => {\n        if (response.mfa) {\n          setUsername(values.username);\n          setRedirect(\"/verify\");\n        } else {\n          localStorage.setItem(\"accessToken\", response.accessToken);\n          props.history.push(\"/\");\n        }\n        setLoading(false);\n      })\n      .catch((error) => {\n        if (error.status === 401) {\n          notification.error({\n            message: \"Error\",\n            description: \"Username or Password is incorrect. Please try again!\",\n          });\n        } else {\n          notification.error({\n            message: \"Error\",\n            description:\n              error.message || \"Sorry! Something went wrong. Please try again!\",\n          });\n        }\n        setLoading(false);\n      });\n  };\n\n  if (redirect) {\n    return (\n      <Redirect to={{ pathname: redirect, state: { username: username } }} />\n    );\n  }\n\n  return (\n    <div className=\"login-container\">\n      <DingtalkOutlined style={{ fontSize: 50 }} />\n      <Form\n        name=\"normal_login\"\n        className=\"login-form\"\n        initialValues={{ remember: true }}\n        onFinish={onFinish}\n      >\n        <Form.Item\n          name=\"username\"\n          rules={[{ required: true, message: \"Please input your Username!\" }]}\n        >\n          <Input\n            size=\"large\"\n            prefix={<UserOutlined className=\"site-form-item-icon\" />}\n            placeholder=\"Username\"\n          />\n        </Form.Item>\n        <Form.Item\n          name=\"password\"\n          rules={[{ required: true, message: \"Please input your Password!\" }]}\n        >\n          <Input\n            size=\"large\"\n            prefix={<LockOutlined className=\"site-form-item-icon\" />}\n            type=\"password\"\n            placeholder=\"Password\"\n          />\n        </Form.Item>\n        <Form.Item>\n          <Button\n            shape=\"round\"\n            size=\"large\"\n            htmlType=\"submit\"\n            className=\"login-form-button\"\n            loading={loading}\n          >\n            Log in\n          </Button>\n        </Form.Item>\n        Not a member yet? <a href=\"/signup\">Sign up</a>\n      </Form>\n    </div>\n  );\n};\n\nexport default Signin;\n"]},"metadata":{},"sourceType":"module"}