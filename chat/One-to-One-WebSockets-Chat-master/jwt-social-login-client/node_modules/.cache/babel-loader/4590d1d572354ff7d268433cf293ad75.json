{"ast":null,"code":"const AUTH_SERVICE = \"http://localhost:8081\";\nconst CHAT_SERVICE = \"http://localhost:8080\";\n\nconst request = options => {\n  const headers = new Headers();\n\n  if (options.setContentType !== false) {\n    headers.append(\"Content-Type\", \"application/json\");\n  }\n\n  if (localStorage.getItem(\"accessToken\")) {\n    headers.append(\"Authorization\", \"Bearer \" + localStorage.getItem(\"accessToken\"));\n  }\n\n  const defaults = {\n    headers: headers\n  };\n  options = Object.assign({}, defaults, options);\n  return fetch(options.url, options).then(response => response.json().then(json => {\n    if (!response.ok) {\n      return Promise.reject(json);\n    }\n\n    return json;\n  }));\n};\n\nexport function login(loginRequest) {\n  return request({\n    url: AUTH_SERVICE + \"/signin\",\n    method: \"POST\",\n    body: JSON.stringify(loginRequest)\n  });\n}\nexport function facebookLogin(facebookLoginRequest) {\n  return request({\n    url: AUTH_SERVICE + \"/facebook/signin\",\n    method: \"POST\",\n    body: JSON.stringify(facebookLoginRequest)\n  });\n}\nexport function signup(signupRequest) {\n  return request({\n    url: AUTH_SERVICE + \"/users\",\n    method: \"POST\",\n    body: JSON.stringify(signupRequest)\n  });\n}\nexport function getCurrentUser() {\n  if (!localStorage.getItem(\"accessToken\")) {\n    return Promise.reject(\"No access token set.\");\n  }\n\n  return request({\n    url: AUTH_SERVICE + \"/users/me\",\n    method: \"GET\"\n  });\n}\nexport function getUsers() {\n  if (!localStorage.getItem(\"accessToken\")) {\n    return Promise.reject(\"No access token set.\");\n  }\n\n  return request({\n    url: AUTH_SERVICE + \"/users/summaries\",\n    method: \"GET\"\n  });\n}\nexport function countNewMessages(senderId, recipientId) {\n  if (!localStorage.getItem(\"accessToken\")) {\n    return Promise.reject(\"No access token set.\");\n  }\n\n  return request({\n    url: CHAT_SERVICE + \"/messages/\" + senderId + \"/\" + recipientId + \"/count\",\n    method: \"GET\"\n  });\n}\nexport function findChatMessages(senderId, recipientId) {\n  if (!localStorage.getItem(\"accessToken\")) {\n    return Promise.reject(\"No access token set.\");\n  }\n\n  return request({\n    url: CHAT_SERVICE + \"/messages/\" + senderId + \"/\" + recipientId,\n    method: \"GET\"\n  });\n}\nexport function findChatMessage(id) {\n  if (!localStorage.getItem(\"accessToken\")) {\n    return Promise.reject(\"No access token set.\");\n  }\n\n  return request({\n    url: CHAT_SERVICE + \"/messages/\" + id,\n    method: \"GET\"\n  });\n}","map":{"version":3,"sources":["/home/abel/Desktop/practice/chat/One-to-One-WebSockets-Chat-master/jwt-social-login-client/src/util/ApiUtil.js"],"names":["AUTH_SERVICE","CHAT_SERVICE","request","options","headers","Headers","setContentType","append","localStorage","getItem","defaults","Object","assign","fetch","url","then","response","json","ok","Promise","reject","login","loginRequest","method","body","JSON","stringify","facebookLogin","facebookLoginRequest","signup","signupRequest","getCurrentUser","getUsers","countNewMessages","senderId","recipientId","findChatMessages","findChatMessage","id"],"mappings":"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","sourcesContent":["const AUTH_SERVICE = \"http://localhost:8081\";\nconst CHAT_SERVICE = \"http://localhost:8080\";\n\nconst request = (options) => {\n  const headers = new Headers();\n\n  if (options.setContentType !== false) {\n    headers.append(\"Content-Type\", \"application/json\");\n  }\n\n  if (localStorage.getItem(\"accessToken\")) {\n    headers.append(\n      \"Authorization\",\n      \"Bearer \" + localStorage.getItem(\"accessToken\")\n    );\n  }\n\n  const defaults = { headers: headers };\n  options = Object.assign({}, defaults, options);\n\n  return fetch(options.url, options).then((response) =>\n    response.json().then((json) => {\n      if (!response.ok) {\n        return Promise.reject(json);\n      }\n      return json;\n    })\n  );\n};\n\nexport function login(loginRequest) {\n  return request({\n    url: AUTH_SERVICE + \"/signin\",\n    method: \"POST\",\n    body: JSON.stringify(loginRequest),\n  });\n}\n\nexport function facebookLogin(facebookLoginRequest) {\n  return request({\n    url: AUTH_SERVICE + \"/facebook/signin\",\n    method: \"POST\",\n    body: JSON.stringify(facebookLoginRequest),\n  });\n}\n\nexport function signup(signupRequest) {\n  return request({\n    url: AUTH_SERVICE + \"/users\",\n    method: \"POST\",\n    body: JSON.stringify(signupRequest),\n  });\n}\n\nexport function getCurrentUser() {\n  if (!localStorage.getItem(\"accessToken\")) {\n    return Promise.reject(\"No access token set.\");\n  }\n\n  return request({\n    url: AUTH_SERVICE + \"/users/me\",\n    method: \"GET\",\n  });\n}\n\nexport function getUsers() {\n  if (!localStorage.getItem(\"accessToken\")) {\n    return Promise.reject(\"No access token set.\");\n  }\n\n  return request({\n    url: AUTH_SERVICE + \"/users/summaries\",\n    method: \"GET\",\n  });\n}\n\nexport function countNewMessages(senderId, recipientId) {\n  if (!localStorage.getItem(\"accessToken\")) {\n    return Promise.reject(\"No access token set.\");\n  }\n\n  return request({\n    url: CHAT_SERVICE + \"/messages/\" + senderId + \"/\" + recipientId + \"/count\",\n    method: \"GET\",\n  });\n}\n\nexport function findChatMessages(senderId, recipientId) {\n  if (!localStorage.getItem(\"accessToken\")) {\n    return Promise.reject(\"No access token set.\");\n  }\n\n  return request({\n    url: CHAT_SERVICE + \"/messages/\" + senderId + \"/\" + recipientId,\n    method: \"GET\",\n  });\n}\n\nexport function findChatMessage(id) {\n  if (!localStorage.getItem(\"accessToken\")) {\n    return Promise.reject(\"No access token set.\");\n  }\n\n  return request({\n    url: CHAT_SERVICE + \"/messages/\" + id,\n    method: \"GET\",\n  });\n}\n"]},"metadata":{},"sourceType":"module"}